# 算法在智能制造中的应用 / Algorithms in Smart Manufacturing

## 概述 / Overview

智能制造通过传感、互联与智能优化提升制造业效率、质量与柔性。算法在计划排程、预测维护、质量检测、工艺优化、供应链协同等环节发挥核心作用。

Smart manufacturing enhances efficiency, quality, and flexibility via sensing, connectivity, and intelligent optimization. Algorithms play core roles in planning and scheduling, predictive maintenance, quality inspection, process optimization, and supply chain coordination.

## 关键场景 / Key Scenarios

- 生产排程与资源调度 / Production scheduling and resource allocation
- 预测性维护 / Predictive maintenance
- 质量检测与缺陷识别 / Quality inspection and defect detection
- 工艺参数优化 / Process parameter optimization
- 产线节拍与瓶颈识别 / Takt time control and bottleneck detection
- 供应链计划与库存优化 / Supply planning and inventory optimization
- 能耗优化与碳排管控 / Energy optimization and carbon footprint control

## 核心算法 / Core Algorithms

### 1. 排程与调度 / Scheduling and Dispatching

- 整数规划与约束规划（MIP/CP）
- 启发式与元启发式：遗传算法、模拟退火、禁忌搜索、蚁群、粒子群
- 强化学习调度（RL-based dispatching）
- 图算法与拓扑优化（有向无环图工序约束）

```python
# 简化的车间作业调度启发式（Python伪代码）
from typing import List, Tuple

Job = List[Tuple[int, int]]  # [(machine_id, duration), ...]

def greedy_schedule(jobs: List[Job]):
    machine_time = {}
    job_time = [0]*len(jobs)
    schedule = []
    for j, ops in enumerate(jobs):
        for (m, d) in ops:
            start = max(machine_time.get(m, 0), job_time[j])
            schedule.append((j, m, start, start + d))
            machine_time[m] = start + d
            job_time[j] = start + d
    return schedule
```

### 2. 预测性维护 / Predictive Maintenance

- 序列建模：LSTM/Transformer，异常检测（Autoencoder、One-Class SVM）
- 剩余寿命预测（RUL）与生存分析（Cox模型、DeepSurv）
- 边缘部署：轻量化模型与漂移检测

```python
# 传感器多变量序列的简单异常得分（z-score）
import numpy as np

def anomaly_score(window: np.ndarray):
    mu = window.mean(axis=0)
    sigma = window.std(axis=0) + 1e-6
    z = np.abs((window[-1] - mu) / sigma)
    return float(z.mean())
```

### 3. 质量检测 / Quality Inspection

- 视觉检测：CNN/ViT，弱监督、少样本检测
- 异常分割（DRAEM、PatchCore）与可解释性（Grad-CAM）
- 合成数据与领域自适应（Domain Adaptation）

### 4. 工艺优化 / Process Optimization

- 贝叶斯优化（BO）与高斯过程（GP）
- 多目标优化（质量/成本/能耗）
- 在制品（WIP）与节拍匹配的控制策略

```python
# 简化贝叶斯优化轮廓函数（pseudo）
def expected_improvement(mu, sigma, best):
    from math import erf, sqrt, exp
    z = (best - mu) / (sigma + 1e-9)
    Phi = 0.5 * (1 + erf(z / sqrt(2)))
    phi = (1 / sqrt(2*3.14159)) * exp(-0.5 * z*z)
    return (best - mu) * Phi + sigma * phi
```

### 5. 供应链与库存优化 / Supply Chain and Inventory

- 需求预测（时序模型、因果模型）
- 多层库存控制（(s, S)、Base-stock、(R, Q) 策略）
- 鲁棒优化与仿真（离散事件仿真 DES）

## 工业实践 / Industrial Practices

- 数据治理：主数据、工段字典、设备台账、数据质量评估
- 系统集成：MES/ERP/PLM/SCADA/APS 一体化
- MLOps 与 AIOps：数据漂移监测、模型回滚、闭环优化
- KPI：OEE、交付周期、一次通过率、能耗强度、库存周转

## 案例 / Case Studies

- 某电子装配厂：RL+启发式混合排程，平均在制品减少18%，交付周期缩短12%
- 某过程工业：GP+BO 工艺寻优，良品率提升2.5%，能耗降低6%
- 某汽车零部件：视觉异常分割与知识蒸馏，漏检率下降70%

## 风险与合规 / Risks and Compliance

- 数据与生产安全、供应链风险、模型偏差与公平性、可追溯与审计
- 工业标准与认证：IEC 62443、ISO 9001、IATF 16949 等

## 总结 / Summary

智能制造中的算法实现贯穿计划、执行与优化闭环，需在实时性、可靠性与可维护性之间权衡，并结合工业知识图谱与领域机理模型实现更稳定的生产优化。
